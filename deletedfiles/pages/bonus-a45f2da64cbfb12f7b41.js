(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{66143:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(85893),a=n(809),r=n.n(a),u=n(92447),i=n(39227),d=n(67294),c=n(35312),o=(n(30381),n(9008),n(8568)),p=n(4914),l=n(38648),y=n(71230),f=n(15746),m=n(39144),h=n(41758),w=n(89588),x=n(85545),b=n(9643),Z=n(84312),v=n(31692),S=n.n(v),A=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"ComradeCommandCenterAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"socialsecuritycontract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"updateBonusVaultAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_comandcenteraddress","type":"address"}],"name":"updateCommandCenter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_socialsecurity","type":"address"}],"name":"updateSSAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_comrade","type":"address"}],"name":"updateWelfareAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"welfarecontract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]'),C=n(64848),j=function(e){var t=(0,C.Z)(),s=(0,d.useState)({}),a=s[0],r=s[1],u=(0,d.useState)(!1),i=u[0],c=u[1];return(0,d.useEffect)((function(){e&&(S().setProvider(n.g.window&&window.ethereum),r(new(S())(A,e)),c(!0))}),[e]),{bonus:a.methods,web3:t,connected:i}},T=o.Z.Title;o.Z.Text,p.Z.Item;function g(){var e=(0,c.u)(),t=(0,d.useState)(!1),n=(t[0],t[1],(0,Z.Z)(["chain","bonus","hasBonus"])),a=(0,i.Z)(n,2),o=a[0],p=(a[1],j(o.bonus)),v=p.bonus,S=(p.web3,p.connected),A=(0,d.useState)(!1),C=(A[0],A[1],(0,d.useState)({})),g=C[0],_=C[1],M=(0,d.useState)(0),k=(M[0],M[1],(0,d.useState)(!1)),B=(k[0],k[1]);(0,d.useEffect)((function(){console.log("STATE",o),S&&o.hasBonus&&O()}),[S,o.hasBonus]);var O=function(){var e=(0,u.Z)(r().mark((function e(){var t,n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,v.welfarecontract().call();case 3:return t=e.sent,e.next=6,v.socialsecuritycontract().call();case 6:return n=e.sent,e.next=9,v.ComradeCommandCenterAddress().call();case 9:s=e.sent,_({centerAddr:s,securityAddr:n,welfareAddr:t}),B(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=(0,u.Z)(r().mark((function t(n,s){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(B(!0),!s.startsWith("0x")||42!=s.length){t.next=8;break}return t.next=4,contract[n](s).send({from:e.account,to:o.center});case 4:(a=t.sent).status&&l.Z.success({message:"Update Successful",description:a.transactionHash}),t.next=9;break;case 8:l.Z.error({message:"Update Failed",description:"Address Incorrect"});case 9:B(!1);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){var t=(0,u.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,contract.updateBonusVaultAddress().send({from:e.account,to:o.center});case 2:(n=t.sent).status&&l.Z.success({message:"Update Successful",description:n.transactionHash});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=(0,d.useCallback)((function(){return(0,s.jsxs)(y.Z,{gutter:[20,20],style:{marginTop:20},children:[(0,s.jsx)(f.Z,{span:12,children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(h.Z,{onClick:U,size:"large",type:"primary",children:"Update Bonus Vault"})})}),(0,s.jsx)(f.Z,{span:24,children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(w.Z,{title:"Command Center Address",value:g.centerAddr}),(0,s.jsx)(x.Z.Search,{placeholder:"Change Command Center Address",enterButton:"Update",size:"large",onSearch:function(e){return E("updateCommandCenter",e)}})]})}),(0,s.jsx)(f.Z,{span:24,children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(w.Z,{title:"Security Address",value:g.securityAddr}),(0,s.jsx)(x.Z.Search,{placeholder:"Change Security Address",enterButton:"Update",size:"large",onSearch:function(e){return E("updateSSAddress",e)}})]})}),(0,s.jsx)(f.Z,{span:24,children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(w.Z,{title:"Welfare Address",value:g.welfareAddr}),(0,s.jsx)(x.Z.Search,{placeholder:"Change Welfare Address",enterButton:"Update",size:"large",onSearch:function(e){return E("updateWelfareAddress",e)}})]})})]})}),[g]);return(0,s.jsx)(b.Z,{children:(0,s.jsxs)("div",{style:{padding:"20px 0px"},children:[(0,s.jsx)(T,{level:2,children:"Bonus Vault"}),o.hasBonus&&N()]})})}},20796:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bonus",function(){return n(66143)}])}},function(e){e.O(0,[774,885,351,255,26,579,701,43],(function(){return t=20796,e(e.s=t);var t}));var t=e.O();_N_E=t}]);