(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{88961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(30266),a=n(66311),s=n(809),i=n.n(s),u=n(67294),o=n(35312),c=n(30381),l=n.n(c),p=(n(9008),n(85789)),d=n(4914),y=n(11382),f=n(39144),h=n(38162),m=n(71230),v=n(15746),x=n(89588),b=n(19650),w=n(59510),g=n(52794),Z=(n(61481),n(92809)),j=n(38648),S=n(22867),O=n(85545),T=n(72724),P=n(67287),k=n(31692),M=n.n(k),N=n(95670),E=function(e){var t=(0,T.Z)(),r=(0,u.useState)({}),a=r[0],s=r[1],i=(0,u.useState)(!1),o=i[0],c=i[1];return(0,u.useEffect)((function(){console.log("erc20 address: "+e),e?(M().setProvider(n.g.window&&window.ethereum),s(new(M())(N.Mt,e)),c(!0),console.log("ERC20 TOKEN ADDRESS",e)):console.log("ERC20 TOKEN NOT SET")}),[e]),[a.methods,t,o]},A=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"BUSD","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"basePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"devAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"devaddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lockExpiration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceIncreasePerCoin","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"purchasedAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"saletoken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sushi","outputs":[{"internalType":"contract SushiToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokensSold","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vestingTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"purchase","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"calculatePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"relock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawNanos","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawMATIC","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),C=function(e){var t=(0,T.Z)(),r=(0,u.useState)({}),a=r[0],s=r[1],i=(0,u.useState)(!1),o=(i[0],i[1]);return(0,u.useEffect)((function(){e?(M().setProvider(n.g.window&&window.ethereum),s(new(M())(A.Mt,e)),o(!0),console.log("NANOSALES ADDRESS",e)):console.log("NANOSALES NOT SET")}),[e]),[a.methods,t]},D=n(85893);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}p.Z.Title;var I=p.Z.Text,B=function(e){e.onComplete,e.address;var t=(0,o.u)(),n=(0,P.Z)(["busd","hasBusd","nanosales","hasNanosales"]),s=(0,a.Z)(n,2),c=s[0],l=s[1],p=E(c.busd),d=(0,a.Z)(p,3),m=d[0],v=d[1],w=d[2],g=(0,u.useState)(0),Z=g[0],T=g[1],k=(0,u.useState)(0),M=k[0],N=k[1],A=(0,u.useState)({amount:0}),_=A[0],B=A[1],R=(0,u.useState)(!1),U=R[0],F=R[1],H=C(c.nanosales),L=(0,a.Z)(H,1)[0],Y=(0,u.useState)(0),z=Y[0],K=Y[1],V=(0,u.useState)(0),X=V[0],q=V[1];(0,u.useEffect)((function(){w&&m&&c.hasBusd&&(J(),$())}),[w,m,c.hasBusd,_]);var J=function(){var e=(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.balanceOf(t.account).call();case 2:return n=e.sent,e.next=5,L.calculatePrice("1000000000000000000").call();case 5:r=e.sent,q(v.utils.fromWei(r[0])),T(v.utils.fromWei(n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.allowance(t.account,c.nanosales).call();case 2:n=e.sent,N(v.utils.fromWei(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!0),e.prev=1,!(z>0)){e.next=12;break}return n=v.utils.toWei((1*(z||0)).toString()).toString(),console.log("APPROVAL AMOUNT",n),e.next=7,m.approve(c.nanosales,n).send({from:t.account,to:c.nanosales});case 7:if(!(r=e.sent).status){e.next=12;break}return j.Z.success({message:"Approve Successful",description:r.transactionHash}),e.next=12,$();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),j.Z.error({message:"Approval Failed",description:e.t0.toString()});case 17:F(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,n=v.utils.toWei(_.amount.toString()).toString(),e.next=5,L.purchase(n).send({from:t.account,to:c.nanosales});case 5:(r=e.sent).status&&(B({amount:0,months:0}),j.Z.success({message:"Purchase Successful",description:r.transactionHash}),l.addVaultCount()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j.Z.error({message:"Purchase Failed",description:e.t0.toString()});case 12:F(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(W(W({},_),{},{amount:parseInt(t.target.value)})),n=v.utils.toWei(parseInt(t.target.value).toString()),e.next=5,L.calculatePrice(n).call();case 5:r=e.sent,K(v.utils.fromWei(r[0])),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsx)(y.Z,{spinning:U,children:(0,D.jsxs)(f.Z,{title:"Nanomachine Sales Form ",children:[(0,D.jsx)(I,{level:5,strong:!0,children:"Price rises .15% for every Nanomachine sold "}),(0,D.jsxs)(I,{level:5,strong:!0,children:[(0,D.jsx)("p",{}),"NanoSales are subject to a 90 Day vesting period "]}),(0,D.jsx)(I,{level:5,strong:!0,children:(0,D.jsx)("p",{children:"Every new purchase resets the 90 day vesting period "})}),(0,D.jsx)(f.Z,{title:"",children:(0,D.jsxs)(S.Z,{size:"large",layout:"vertical",children:[(0,D.jsx)(x.Z,{className:"ant-alert",title:"DAI Balance",value:Z}),(0,D.jsx)(x.Z,{title:"Approved",value:M}),(0,D.jsxs)(I,{level:5,strong:!0,children:[" Next Nanomachine token price is ",X," BUSD"]}),(0,D.jsx)(S.Z.Item,{name:"vAmount",label:"Purchase Nanomachines",rules:[{required:!0,message:"Enter deposit amount"}],children:(0,D.jsx)(O.Z,{type:"number",placeholder:"e.g 10000",value:_.amount,onChange:ee})}),(0,D.jsxs)(b.Z,{children:[(0,D.jsx)(h.Z,{size:"large",onClick:G,children:"Approve"}),(0,D.jsx)(h.Z,{size:"large",type:"primary",onClick:Q,children:"Purchase NanoMachines"})]}),(0,D.jsx)(f.Z,{style:{marginTop:20,textAlign:"center"},children:(0,D.jsxs)(I,{level:5,strong:!0,children:[" ",_.amount," Nanomachines will cost you ",z," BUSD. You will be vested for 90 days."]})})]})})]})})},R=n(42578),U=n(29359);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw s}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}p.Z.Title,p.Z.Text;var z=function(e){e.onComplete;var t=e.address,n=(0,o.u)(),s=(0,U.Z)(),c=(0,a.Z)(s,2),p=c[0],d=(c[1],(0,P.Z)(["security","hasSecurity","vaultCount"])),b=(0,a.Z)(d,2),w=b[0],g=(b[1],(0,R.Z)(w.security)),Z=g.security,S=g.web3,O=g.connected,T=(0,u.useState)([]),k=(T[0],T[1]),M=(0,u.useState)({}),N=(M[0],M[1]),E=(0,u.useState)(0),A=(E[0],E[1]),_=(0,u.useState)(!1),W=_[0],I=_[1],B=(0,u.useState)(!1),F=(B[0],B[1]),Y=C(w.nanosales),z=(0,a.Z)(Y,1)[0],K=(0,u.useState)(0),V=K[0],X=K[1],q=(0,u.useState)(0),J=q[0],$=q[1];(0,u.useEffect)((function(){O&&w.hasNanosales&&G(!1)}),[O,w.hasNanosales,w.nanosales]);var G=function(){var e=(0,r.Z)(i().mark((function e(){var r,a,s,u,o,c,d,y,f,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,z.purchasedAmount(n.account).call();case 3:return r=e.sent,e.next=6,z.lockExpiration(n.account).call();case 6:return a=e.sent,X(S.utils.fromWei(r)),$(0==a?0:l().unix(a).format("MM/DD/YYYY HH:mm")),e.next=11,Z.getUserManufacturingPlants(n.account).call();case 11:return s=e.sent,e.next=14,Z.userManufacturingPlantCount(n.account).call();case 14:u=e.sent,console.log(u),k(s),o={},c=L(s),e.prev=19,c.s();case 21:if((d=c.n()).done){e.next=33;break}return y=d.value,e.next=25,Z.ManufacturingPlants(y).call();case 25:return f=e.sent,e.next=28,p(f);case 28:h=e.sent,console.log(h),o[y]=H({address:t},h);case 31:e.next=21;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(19),c.e(e.t0);case 38:return e.prev=38,c.f(),e.finish(38);case 41:N(o),A(u),F(!0),I(!1);case 45:case"end":return e.stop()}}),e,null,[[19,35,38,41]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.withdraw().send({from:n.account,to:w.nanosales});case 2:(r=e.sent).status&&j.Z.success({message:"Settlement Successful",description:r.transactionHash});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsx)(y.Z,{spinning:W,children:(0,D.jsxs)(f.Z,{title:"Nanos Purchased",extra:(0,D.jsx)(h.Z,{onClick:G,children:"Refresh"}),children:[(0,D.jsx)(h.Z,{type:"primary",onClick:function(){return Q()},children:"Withdraw Nanomachines"}),(0,D.jsxs)(m.Z,{style:{marginBottom:20},children:[(0,D.jsx)(v.Z,{span:12,children:(0,D.jsx)(x.Z,{title:"Nanomachines Locked ",value:V})}),(0,D.jsx)(v.Z,{span:12,children:(0,D.jsx)(x.Z,{title:"Lock Expiration ",value:J})})]})]})})},K=(n(92261),n(49772),n(74157)),V=p.Z.Title;p.Z.Text,d.Z.Item;function X(){var e=(0,o.u)(),t=(0,u.useState)(!1),n=(t[0],t[1],(0,P.Z)(["chain","security","hasSecurity","micromachines","securityInfo"])),s=(0,a.Z)(n,2),c=s[0],l=s[1],p=(0,R.Z)(c.security),d=p.security,Z=(p.web3,p.getField,p.sendTx,p.connected),j=p.getFields,S=(0,u.useState)(!1),O=(S[0],S[1],(0,u.useState)({})),T=O[0],k=O[1],M=(0,u.useState)(!1),N=M[0],A=M[1],C=(0,K.Z)(c.micromachines),_=((0,a.Z)(C,1)[0],E(c.busd));(0,a.Z)(_,1)[0];(0,u.useEffect)((function(){c.hasSecurity&&Z&&W()}),[c.hasSecurity,c.vaultCount,Z]);var W=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,d.totalSupply().call();case 3:return e.sent,e.next=6,j();case 6:t=e.sent,k(t),l.setSecurityInfo(t),A(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useCallback)((function(){return(0,D.jsx)(y.Z,{spinning:N,children:(0,D.jsx)(f.Z,{title:"Warbot Manufacturing Center",extra:(0,D.jsx)(h.Z,{type:"primary",onClick:W,children:"Refresh"}),children:(0,D.jsxs)(m.Z,{gutter:[20,20],children:[(0,D.jsx)(v.Z,{span:8,children:(0,D.jsx)(x.Z,{title:"WarBots in Existence",value:T.totalSupply})}),(0,D.jsx)(v.Z,{span:8,children:(0,D.jsx)(x.Z,{title:"Total Manufacturing Plants",value:T.globalwarbotmanufacturingplants})}),(0,D.jsx)(v.Z,{span:8,children:(0,D.jsx)(x.Z,{title:"Warbots Manufactured Per Month",value:T.globalwarbotproduction})})]})})})}),[T,N]);return(0,D.jsx)(g.Z,{children:(0,D.jsxs)("div",{style:{padding:"20px 0px"},children:[(0,D.jsx)(V,{level:2,children:"Nanomachine Sales - Upgrade your Warbots"}),c.hasSecurity&&"connected"==e.status&&(0,D.jsxs)("div",{children:[(0,D.jsx)(b.Z,{style:{marginTop:20}}),(0,D.jsx)(w.Z,{defaultActiveKey:"dashboard",style:{marginTop:20},children:(0,D.jsx)(w.Z.TabPane,{tab:"Nanosale Dashboard",children:(0,D.jsxs)(m.Z,{gutter:20,style:{marginTop:"10px",marginBottom:"30px"},children:[(0,D.jsx)(v.Z,{xs:8,children:(0,D.jsx)(B,{})}),(0,D.jsxs)(v.Z,{xs:16,children:[(0,D.jsx)(z,{}),(0,D.jsx)(b.Z,{style:{marginTop:20}})]})]})},"dashboard")})]})]})})}},73205:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nanosale",function(){return n(88961)}])}},function(e){e.O(0,[92,885,351,26,579,407,4,144,114,794,772,774,888,179],(function(){return t=73205,e(e.s=t);var t}));var t=e.O();_N_E=t}]);