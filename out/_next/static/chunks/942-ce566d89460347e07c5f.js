"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{40942:function(e,t,r){r(92809);var a=r(30266),n=r(66311),s=r(809),o=r.n(s),c=r(67294),u=r(85789),i=r(38648),l=r(11382),p=r(39144),f=r(22867),v=r(89588),d=r(85545),b=r(19650),g=r(38162),h=r(35312),m=(r(72724),r(42578)),x=r(67287),Z=r(27172),w=r(83366),S=r(38412),W=r(85893);u.Z.Title;var A=u.Z.Text;t.Z=function(e){e.onComplete,e.address;var t=(0,h.u)(),r=(0,x.Z)(["warbotmanufacturer","hasWarbotmanufacturer","nanomachines","hasNanomachines"]),s=(0,n.Z)(r,2),u=s[0],k=(s[1],(0,m.Z)(u.warbotmanufacturer)),y=k.warbotmanufacturer,j=k.web3,I=k.connected,T=(0,S.Z)(u.nanomachines),N=(0,n.Z)(T,1)[0],R=(0,Z.Z)(u.warbotstats),O=(0,n.Z)(R,1)[0],E=(0,c.useState)(0),F=E[0],U=E[1],C=(0,c.useState)(0),L=C[0],P=C[1],B=(0,c.useState)(0),q=(B[0],B[1],(0,c.useState)(!1)),H=(q[0],q[1],(0,c.useState)({amount:0,warbot1:0,warbot2:0})),V=H[0],_=H[1],z=(0,w.Z)(u.warbotstatsdata),D=(0,n.Z)(z,2),M=D[0],G=(D[1],(0,c.useState)(!1)),J=G[0],K=G[1],Q=(0,c.useState)(0),X=Q[0],Y=Q[1],$=(0,c.useState)(0),ee=$[0],te=$[1],re=(0,c.useState)(0),ae=re[0],ne=re[1],se=(0,c.useState)(0),oe=se[0],ce=se[1],ue=(0,c.useState)(0),ie=ue[0],le=ue[1],pe=(0,c.useState)(0),fe=pe[0],ve=pe[1],de=(0,c.useState)(0),be=de[0],ge=de[1],he=(0,c.useState)(0),me=he[0],xe=he[1],Ze=(0,c.useState)(0),we=Ze[0],Se=Ze[1],We=(0,c.useState)(0),Ae=We[0],ke=We[1];(0,c.useEffect)((function(){I&&u.hasWarbotmanufacturer&&Ie()}),[V]),(0,c.useEffect)((function(){I&&N&&u.hasNanomachines&&(ye(),je())}),[I,N,u.hasMicromachines]);var ye=function(){var e=(0,a.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.balanceOf(t.account).call();case 2:r=e.sent,U(j.utils.fromWei(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,a.Z)(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.allowance(t.account,u.warbotstats).call();case 2:return r=e.sent,e.next=5,y.isApprovedForAll(t.account,u.warbotstats).call();case 5:a=e.sent,P(j.utils.fromWei(r)),Se("primary"),ke("danger"),ve(a),console.log("NANO APPROVAL FOR WARBOTSTAT IS "+r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=j.utils.toWei((V.amount||0).toString()).toString(),console.log("VALUE",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,a.Z)(o().mark((function e(){var r,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!0),e.prev=1,!(ie>0)){e.next=12;break}return r=j.utils.toWei((1*(ie||0)).toString()).toString(),console.log("APPROVAL AMOUNT",r),e.next=7,N.approve(u.warbotstats,r).send({from:t.account,to:u.warbotmanufacturer});case 7:if(!(a=e.sent).status){e.next=12;break}return i.Z.success({message:"Approve Successful",description:a.transactionHash}),e.next=12,je();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),i.Z.error({message:"Approval Failed",description:e.t0.toString()});case 17:if(e.prev=17,fe){e.next=27;break}return console.log("WARBOT NFTS TRANSFER APPROVAL"),e.next=22,y.setApprovalForAll(u.warbotstats,"true").send({from:t.account,to:u.warbotmanufacturer});case 22:if(!(n=e.sent).status){e.next=27;break}return i.Z.success({message:"NFT Approval Successful",description:n.transactionHash}),e.next=27,je();case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(17),i.Z.error({message:"Approval Failed",description:e.t1.toString()});case 32:K(!1);case 33:case"end":return e.stop()}}),e,null,[[1,14],[17,29]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,a.Z)(o().mark((function e(){var r,a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handle Deposit"),K(!0),e.prev=2,r=j.utils.toWei(ie.toString()).toString(),console.log("UPGRADE WARBOTS ",r,X,ee),e.next=7,O.upgradeWarbot(X,ee).send({from:t.account,to:u.warbotstats});case 7:a=e.sent,n=parseInt(ae)+1,a.status&&(_({amount:0,months:0}),i.Z.success({message:"Warbot # "+X+" Upgrading from level "+ae+" to level "+n+" Successful",description:a.transactionHash})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),i.Z.error({message:"Warbot Upgrading Failed",description:e.t0.toString()});case 15:K(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=(0,a.Z)(o().mark((function e(t){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t.target.value){e.next=16;break}return e.prev=1,e.next=4,M.WarbotLevel(t.target.value).call();case 4:r=e.sent,a=(parseInt(r)+1)*(parseInt(r)+1),le(a),Y(parseInt(t.target.value)),ne(r),ge(" Warbot 1 is currently in level "+r),console.log("warbot level up required : "+a),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,a.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t.target.value){e.next=15;break}return e.prev=1,e.next=4,M.WarbotLevel(t.target.value).call();case 4:r=e.sent,te(parseInt(t.target.value)),ce(r),console.log("Warbots levels are "+ae+" and "+r),xe(" Warbot 2 is currently in level "+r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("error"+e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,W.jsx)(l.Z,{spinning:J,children:(0,W.jsx)(p.Z,{title:"Warbot Reassembly",children:(0,W.jsx)(p.Z,{title:"Warbot Hull Upgrading facility",children:(0,W.jsxs)(f.Z,{size:"large",layout:"vertical",children:[(0,W.jsx)(v.Z,{title:"Balance",value:F}),(0,W.jsx)(v.Z,{title:"Approved",value:L}),(0,W.jsxs)(A,{level:5,strong:!0,children:[" ",0==ae?"Warbot doesnt exist":be," "]}),(0,W.jsx)(f.Z.Item,{name:"warbot1",label:"Warbot 1 ( Warbot being Upgraded - Stats transferred )",rules:[{required:!0,message:"Enter Warbot 1 Identification"}],children:(0,W.jsx)(d.Z,{type:"number",placeholder:"e.g 10000",value:V.warbot1,onChange:Re})}),(0,W.jsxs)(A,{level:5,strong:!0,children:[" ",0==oe?"Warbot doesnt exist":me," "]}),(0,W.jsx)(f.Z.Item,{name:"warbot2",label:"Warbot 2 ( Warbot used for parts - Stats lost)",rules:[{required:!0,message:"Enter Warbot 2 Identification"}],children:(0,W.jsx)(d.Z,{type:"number",placeholder:"e.g 10000",value:V.warbot2,onChange:Oe})}),(0,W.jsxs)(A,{level:5,strong:!0,children:[" Nanomachines ",ie," required for upgrade "]}),(0,W.jsxs)(b.Z,{children:[(0,W.jsx)(g.Z,{size:"large",type:"primary",onClick:Te,children:"Approve"}),(0,W.jsx)(g.Z,{size:"large",type:1==fe&&L>=ie?we:Ae,onClick:fe&&L>=ie==1&&parseInt(ae)==parseInt(oe)&&parseInt(X)!=parseInt(ee)?Ne:function(e){console.log("not enough:"+ae,oe)},children:"Upgrade Warbots"})]}),(0,W.jsx)(p.Z,{style:{marginTop:20,textAlign:"center"},children:(0,W.jsxs)(A,{level:5,strong:!0,children:[" Upgrade Warbot # ",X," Level ",ae," Warbot  to a  level ",parseInt(ae)+1," Warbot by  trading in an additional  level  ",ae,"  WarBot along  with ",ie," nanomachines"]})})]})})})})}}}]);