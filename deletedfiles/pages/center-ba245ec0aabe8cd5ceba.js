(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{90416:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(85893),r=n(809),a=n.n(r),u=n(92447),d=n(39227),c=n(67294),i=n(35312),o=(n(30381),n(9008),n(8568)),l=n(4914),p=n(38648),f=n(71230),h=n(15746),y=n(39144),x=n(89588),A=n(85545),S=n(9643),m=n(84312),Z=n(31692),v=n.n(Z),w=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_comrade","type":"address"}],"name":"updateWelfareAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_pension","type":"address"}],"name":"updatePensionAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getWelfareAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSocialSecurityAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_pension","type":"address"}],"name":"updateSSAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getBonusVault","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}'),g=n(64848),E=function(e){var t=(0,g.Z)(),s=(0,c.useState)({}),r=s[0],a=s[1],u=(0,c.useState)(!1),d=u[0],i=u[1];return(0,c.useEffect)((function(){e?(v().setProvider(n.g.window&&window.ethereum),a(new(v())(w.Mt,e)),i(!0),console.log("WELFARE COMMAND CENTER ADDRESS",e)):console.log("WELFARE COMMAND CENTER NOT SET")}),[e]),{center:r.methods,web3:t,connected:d}},b=o.Z.Title;o.Z.Text,l.Z.Item;function j(){var e=(0,i.u)(),t=(0,c.useState)(!1),n=(t[0],t[1],(0,m.Z)(["chain","center","hasCenter"])),r=(0,d.Z)(n,2),o=r[0],l=(r[1],E(o.center)),Z=l.center,v=(l.web3,l.connected),w=(0,c.useState)(!1),g=(w[0],w[1],(0,c.useState)({})),j=g[0],C=g[1],T=(0,c.useState)(0),_=(T[0],T[1],(0,c.useState)(!1)),M=(_[0],_[1]);(0,c.useEffect)((function(){v&&"connected"==e.status&&o.hasCenter&&N()}),[v,e.status,o.hasCenter]);var N=function(){var e=(0,u.Z)(a().mark((function e(){var t,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,Z.getBonusVault().call();case 3:return t=e.sent,e.next=6,Z.getSocialSecurityAddress().call();case 6:return n=e.sent,e.next=9,Z.getWelfareAddress().call();case 9:s=e.sent,C({vaultAddr:t,securityAddr:n,welfareAddr:s}),M(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=(0,u.Z)(a().mark((function t(n,s){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(!0),!s.startsWith("0x")||42!=s.length){t.next=8;break}return t.next=4,contract[n](s).send({from:e.account,to:o.center});case 4:(r=t.sent).status&&p.Z.success({message:"Update Successful",description:r.transactionHash}),t.next=9;break;case 8:p.Z.error({message:"Update Failed",description:"Address Incorrect"});case 9:M(!1);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),W=(0,c.useCallback)((function(){return(0,s.jsxs)(f.Z,{gutter:[20,20],style:{marginTop:20},children:[(0,s.jsx)(h.Z,{span:24,children:(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(x.Z,{title:"Vault Address",value:j.vaultAddr}),(0,s.jsx)(A.Z.Search,{placeholder:"Change Vault Address",enterButton:"Update",size:"large",onSearch:function(e){return k("updateBonusVaultAddress",e)}})]})}),(0,s.jsx)(h.Z,{span:24,children:(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(x.Z,{title:"Security Address",value:j.securityAddr}),(0,s.jsx)(A.Z.Search,{placeholder:"Change Security Address",enterButton:"Update",size:"large",onSearch:function(e){return k("updateSSAddress",e)}})]})}),(0,s.jsx)(h.Z,{span:24,children:(0,s.jsxs)(y.Z,{children:[(0,s.jsx)(x.Z,{title:"Welfare Address",value:j.welfareAddr}),(0,s.jsx)(A.Z.Search,{placeholder:"Change Welfare Address",enterButton:"Update",size:"large",onSearch:function(e){return k("updateWelfareAddress",e)}})]})})]})}),[j]);return(0,s.jsx)(S.Z,{children:(0,s.jsxs)("div",{style:{padding:"20px 0px"},children:[(0,s.jsx)(b,{level:2,children:"Command Center"}),o.hasCenter&&W()]})})}},35932:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/center",function(){return n(90416)}])}},function(e){e.O(0,[774,885,351,255,26,579,701,43],(function(){return t=35932,e(e.s=t);var t}));var t=e.O();_N_E=t}]);